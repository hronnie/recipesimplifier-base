       
spring:
  datasource:
    url: jdbc:mysql://172.17.0.2:3306/gastroadmin
    username: gastrouser
    password: gastropw
    platform: mysql
    initialize: true
  jpa:
    # database-platform: org.hibernate.dialect.MySQLDialect
    generate-ddl: true
    hibernate:
      ddl-auto: update
      
    properties: 
      hibernate.dialect: org.hibernate.dialect.MySQL5Dialect
      hibernate: 
        id:
          new_generator_mappings: false
        format_sql: true
---
spring:
  profiles: container
  datasource:
    url: jdbc:mysql://${DATABASE_HOST}:${DATABASE_PORT}/${DATABASE_NAME}
    username: ${DATABASE_USER}
    password: ${DATABASE_PASSWORD}
    initialize: true
    
    
# ==============================================================
# = Spring Security / Queries for AuthenticationManagerBuilder  
# ==============================================================
spring: 
  queries: 
    users-query: select email, password, active from user where email=?
    roles-query: select u.email, r.role from user u inner join user_role ur on(u.user_id=ur.user_id) inner join role r on(ur.role_id=r.role_id) where u.email=?

